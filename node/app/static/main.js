// Generated by CoffeeScript 1.8.0
(function() {
  $(function() {
    $('#searchButton input').on('keyup', function(event) {
      var text;
      text = $(this).val();
      if (event.keyCode === 13) {
        return $.ajax({
          url: '/search',
          type: 'POST',
          data: {
            user: FB.user.id,
            val: text
          },
          success: function(data) {
            return $('#title').val(data);
          },
          dataType: 'json'
        });
      } else if (event.key.length === 1) {
        return $.ajax({
          url: '/autocomplete',
          type: 'POST',
          data: {
            user: FB.user.id,
            val: text
          },
          success: function(data) {
            var suggestion, _i, _len, _results;
            $('#autocompletion').empty();
            _results = [];
            for (_i = 0, _len = data.length; _i < _len; _i++) {
              suggestion = data[_i];
              _results.push($('<option value="' + suggestion + '">').appendTo('#autocompletion'));
            }
            return _results;
          },
          dataType: 'json'
        });
      }
    });
    $('#recommend').on('click', function() {
      return $.ajax({
        url: '/recommendation',
        type: 'POST',
        success: function(data) {
          return $('#recommendations').val(data);
        },
        dataType: 'json'
      });
    });
    return $('#lmdb').on('click', function() {
      return $.ajax({
        url: '/lmdb',
        type: 'POST'
      });
    });
  });

}).call(this);
